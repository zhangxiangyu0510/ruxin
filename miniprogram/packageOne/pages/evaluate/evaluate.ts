// pages/evaluate/evaluate.ts
const evaluateApp = getApp<IAppOption>();
import {svgColor} from "../../../utils/changeThemeColor";
var api = require('../../../config/api');
var util = require('../../../utils/util');
interface ItemData {
    text:string,
    iconUrl:string,
    active:boolean,
    value:number,
    notActiveIcon:string
}
Page({
    /**
     * 页面的初始数据
     */
    data: {
        time:"",
        gradeData:[
            {
                text:"好评",
                value:1,
                iconUrl:`<svg style="fill:#EBEBEB" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="9"/>
                <path d="M11.939 22.4578C10.5234 22.4578 9.15229 22.1789 7.85854 21.6352C6.61167 21.1078 5.48901 20.3508 4.52808 19.3875C3.56714 18.4266 2.81011 17.3039 2.28042 16.057C1.73433 14.7633 1.45776 13.3922 1.45776 11.9766C1.45776 10.5609 1.73433 9.18984 2.28042 7.89843C2.80776 6.65156 3.56479 5.5289 4.52808 4.56796C5.48901 3.60703 6.61167 2.84999 7.85854 2.32031C9.15229 1.77421 10.5234 1.49765 11.939 1.49765C13.3546 1.49765 14.7257 1.77421 16.0195 2.32031C17.2664 2.84765 18.389 3.60468 19.3499 4.56796C20.3109 5.5289 21.0679 6.65156 21.5976 7.89843C22.1437 9.19218 22.4203 10.5633 22.4203 11.9789C22.4203 13.3945 22.1414 14.7656 21.5976 16.0594C21.0703 17.3086 20.3132 18.4289 19.3499 19.3898C18.389 20.3508 17.2664 21.1078 16.0195 21.6375C14.7257 22.1812 13.3546 22.4578 11.939 22.4578ZM11.939 3.0539C7.01948 3.0539 3.01636 7.05703 3.01636 11.9766C3.01636 16.8961 7.01948 20.8992 11.939 20.8992C16.8585 20.8992 20.8617 16.8961 20.8617 11.9766C20.8617 7.05703 16.8585 3.0539 11.939 3.0539Z" />
                <path d="M6.69604 9.61173C6.69604 9.9592 6.83408 10.2924 7.07978 10.5381C7.32548 10.7839 7.65873 10.9219 8.0062 10.9219C8.35368 10.9219 8.68692 10.7839 8.93262 10.5381C9.17832 10.2924 9.31636 9.9592 9.31636 9.61173C9.31636 9.26425 9.17832 8.93101 8.93262 8.68531C8.68692 8.43961 8.35368 8.30157 8.0062 8.30157C7.65873 8.30157 7.32548 8.43961 7.07978 8.68531C6.83408 8.93101 6.69604 9.26425 6.69604 9.61173Z" fill="white"/>
                <path d="M14.5618 9.58594C14.5618 9.75799 14.5957 9.92836 14.6615 10.0873C14.7273 10.2463 14.8238 10.3907 14.9455 10.5124C15.0672 10.634 15.2116 10.7305 15.3705 10.7964C15.5295 10.8622 15.6999 10.8961 15.8719 10.8961C16.044 10.8961 16.2143 10.8622 16.3733 10.7964C16.5323 10.7305 16.6767 10.634 16.7983 10.5124C16.92 10.3907 17.0165 10.2463 17.0823 10.0873C17.1482 9.92836 17.1821 9.75799 17.1821 9.58594C17.1821 9.41389 17.1482 9.24352 17.0823 9.08457C17.0165 8.92561 16.92 8.78118 16.7983 8.65952C16.6767 8.53786 16.5323 8.44136 16.3733 8.37552C16.2143 8.30968 16.044 8.27579 15.8719 8.27579C15.6999 8.27579 15.5295 8.30968 15.3705 8.37552C15.2116 8.44136 15.0672 8.53786 14.9455 8.65952C14.8238 8.78118 14.7273 8.92561 14.6615 9.08457C14.5957 9.24352 14.5618 9.41389 14.5618 9.58594Z" fill="white"/>
                <path d="M12.0774 17.182C10.0149 17.182 8.47266 15.5484 8.40704 15.4758C8.14219 15.1922 8.1586 14.7469 8.44454 14.482C8.72813 14.2172 9.17344 14.2336 9.43594 14.5172C9.45704 14.5383 10.6406 15.7758 12.0774 15.7758H12.1313C12.9422 15.757 13.7109 15.3305 14.4211 14.5055C14.6742 14.2102 15.1195 14.1773 15.4125 14.4305C15.7078 14.6836 15.7406 15.1289 15.4875 15.4219C14.5031 16.5656 13.3805 17.1562 12.15 17.1797C12.1266 17.182 12.1008 17.182 12.0774 17.182Z" fill="white"/>
                </svg>
                `,
                notActiveIcon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.939 22.4578C10.5234 22.4578 9.15229 22.1789 7.85854 21.6352C6.61167 21.1078 5.48901 20.3508 4.52808 19.3875C3.56714 18.4266 2.81011 17.3039 2.28042 16.0571C1.73433 14.7633 1.45776 13.3922 1.45776 11.9766C1.45776 10.561 1.73433 9.18987 2.28042 7.89846C2.80776 6.65159 3.56479 5.52893 4.52808 4.56799C5.48901 3.60706 6.61167 2.85002 7.85854 2.32034C9.15229 1.77424 10.5234 1.49768 11.939 1.49768C13.3546 1.49768 14.7257 1.77424 16.0195 2.32034C17.2664 2.84768 18.389 3.60471 19.3499 4.56799C20.3109 5.52893 21.0679 6.65159 21.5976 7.89846C22.1437 9.19221 22.4203 10.5633 22.4203 11.9789C22.4203 13.3946 22.1414 14.7656 21.5976 16.0594C21.0703 17.3086 20.3132 18.4289 19.3499 19.3899C18.389 20.3508 17.2664 21.1078 16.0195 21.6375C14.7257 22.1813 13.3546 22.4578 11.939 22.4578ZM11.939 3.05393C7.01948 3.05393 3.01636 7.05706 3.01636 11.9766C3.01636 16.8961 7.01948 20.8992 11.939 20.8992C16.8585 20.8992 20.8617 16.8961 20.8617 11.9766C20.8617 7.05706 16.8585 3.05393 11.939 3.05393Z" fill="#EBEBEB"/>
                <path d="M6.69604 9.61167C6.69604 9.95914 6.83408 10.2924 7.07978 10.5381C7.32548 10.7838 7.65873 10.9218 8.0062 10.9218C8.35368 10.9218 8.68692 10.7838 8.93262 10.5381C9.17832 10.2924 9.31636 9.95914 9.31636 9.61167C9.31636 9.26419 9.17832 8.93095 8.93262 8.68525C8.68692 8.43955 8.35368 8.30151 8.0062 8.30151C7.65873 8.30151 7.32548 8.43955 7.07978 8.68525C6.83408 8.93095 6.69604 9.26419 6.69604 9.61167Z" fill="#EBEBEB"/>
                <path d="M14.5618 9.58591C14.5618 9.75796 14.5957 9.92833 14.6615 10.0873C14.7273 10.2462 14.8238 10.3907 14.9455 10.5123C15.0672 10.634 15.2116 10.7305 15.3705 10.7963C15.5295 10.8622 15.6999 10.8961 15.8719 10.8961C16.044 10.8961 16.2143 10.8622 16.3733 10.7963C16.5323 10.7305 16.6767 10.634 16.7983 10.5123C16.92 10.3907 17.0165 10.2462 17.0823 10.0873C17.1482 9.92833 17.1821 9.75796 17.1821 9.58591C17.1821 9.41386 17.1482 9.24349 17.0823 9.08454C17.0165 8.92558 16.92 8.78115 16.7983 8.65949C16.6767 8.53783 16.5323 8.44133 16.3733 8.37549C16.2143 8.30964 16.044 8.27576 15.8719 8.27576C15.6999 8.27576 15.5295 8.30964 15.3705 8.37549C15.2116 8.44133 15.0672 8.53783 14.9455 8.65949C14.8238 8.78115 14.7273 8.92558 14.6615 9.08454C14.5957 9.24349 14.5618 9.41386 14.5618 9.58591Z" fill="#EBEBEB"/>
                <path d="M12.0774 17.1821C10.0149 17.1821 8.47266 15.5485 8.40704 15.4758C8.14219 15.1922 8.1586 14.7469 8.44454 14.4821C8.72813 14.2172 9.17344 14.2336 9.43594 14.5172C9.45704 14.5383 10.6406 15.7758 12.0774 15.7758H12.1313C12.9422 15.7571 13.7109 15.3305 14.4211 14.5055C14.6742 14.2102 15.1195 14.1774 15.4125 14.4305C15.7078 14.6836 15.7406 15.129 15.4875 15.4219C14.5031 16.5657 13.3805 17.1563 12.15 17.1797C12.1266 17.1821 12.1008 17.1821 12.0774 17.1821Z" fill="#EBEBEB"/>
                </svg>
                `,
                active:false
            },
            {
                text:"中评",
                value:2,
                iconUrl:`<svg style="fill:#EBEBEB" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.939 22.4578C10.5234 22.4578 9.15229 22.1789 7.85854 21.6352C6.61167 21.1078 5.48901 20.3508 4.52808 19.3875C3.56714 18.4266 2.81011 17.3039 2.28042 16.0571C1.73433 14.7633 1.45776 13.3922 1.45776 11.9766C1.45776 10.561 1.73433 9.18987 2.28042 7.89846C2.80776 6.65159 3.56479 5.52893 4.52808 4.56799C5.48901 3.60706 6.61167 2.85002 7.85854 2.32034C9.15229 1.77424 10.5234 1.49768 11.939 1.49768C13.3546 1.49768 14.7257 1.77424 16.0195 2.32034C17.2664 2.84768 18.389 3.60471 19.3499 4.56799C20.3109 5.52893 21.0679 6.65159 21.5976 7.89846C22.1437 9.19221 22.4203 10.5633 22.4203 11.9789C22.4203 13.3946 22.1414 14.7656 21.5976 16.0594C21.0703 17.3086 20.3132 18.4289 19.3499 19.3899C18.389 20.3508 17.2664 21.1078 16.0195 21.6375C14.7257 22.1813 13.3546 22.4578 11.939 22.4578ZM11.939 3.05393C7.01948 3.05393 3.01636 7.05706 3.01636 11.9766C3.01636 16.8961 7.01948 20.8992 11.939 20.8992C16.8585 20.8992 20.8617 16.8961 20.8617 11.9766C20.8617 7.05706 16.8585 3.05393 11.939 3.05393Z"/>
                <circle cx="12" cy="12" r="9"/>
                <path d="M6.69604 9.61167C6.69604 9.95914 6.83408 10.2924 7.07978 10.5381C7.32548 10.7838 7.65873 10.9218 8.0062 10.9218C8.35368 10.9218 8.68692 10.7838 8.93262 10.5381C9.17832 10.2924 9.31636 9.95914 9.31636 9.61167C9.31636 9.26419 9.17832 8.93095 8.93262 8.68525C8.68692 8.43955 8.35368 8.30151 8.0062 8.30151C7.65873 8.30151 7.32548 8.43955 7.07978 8.68525C6.83408 8.93095 6.69604 9.26419 6.69604 9.61167Z" fill="white"/>
                <path d="M14.5618 9.58591C14.5618 9.75796 14.5957 9.92833 14.6615 10.0873C14.7273 10.2462 14.8238 10.3907 14.9455 10.5123C15.0672 10.634 15.2116 10.7305 15.3705 10.7963C15.5295 10.8622 15.6999 10.8961 15.8719 10.8961C16.044 10.8961 16.2143 10.8622 16.3733 10.7963C16.5323 10.7305 16.6767 10.634 16.7983 10.5123C16.92 10.3907 17.0165 10.2462 17.0823 10.0873C17.1482 9.92833 17.1821 9.75796 17.1821 9.58591C17.1821 9.41386 17.1482 9.24349 17.0823 9.08454C17.0165 8.92558 16.92 8.78115 16.7983 8.65949C16.6767 8.53783 16.5323 8.44133 16.3733 8.37549C16.2143 8.30964 16.044 8.27576 15.8719 8.27576C15.6999 8.27576 15.5295 8.30964 15.3705 8.37549C15.2116 8.44133 15.0672 8.53783 14.9455 8.65949C14.8238 8.78115 14.7273 8.92558 14.6615 9.08454C14.5957 9.24349 14.5618 9.41386 14.5618 9.58591Z" fill="white"/>
                <path d="M14.932 16.4672H8.93201C8.54294 16.4672 8.22888 16.1531 8.22888 15.764C8.22888 15.375 8.54294 15.0609 8.93201 15.0609H14.932C15.3211 15.0609 15.6351 15.375 15.6351 15.764C15.6351 16.1531 15.3187 16.4672 14.932 16.4672Z" fill="white"/>
                </svg>                
                `,
                notActiveIcon:`<svg style="fill:#EBEBEB" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.939 22.4578C10.5234 22.4578 9.15229 22.1789 7.85854 21.6352C6.61167 21.1078 5.48901 20.3508 4.52808 19.3875C3.56714 18.4266 2.81011 17.3039 2.28042 16.057C1.73433 14.7633 1.45776 13.3922 1.45776 11.9766C1.45776 10.5609 1.73433 9.18984 2.28042 7.89843C2.80776 6.65156 3.56479 5.5289 4.52808 4.56796C5.48901 3.60703 6.61167 2.84999 7.85854 2.32031C9.15229 1.77421 10.5234 1.49765 11.939 1.49765C13.3546 1.49765 14.7257 1.77421 16.0195 2.32031C17.2664 2.84765 18.389 3.60468 19.3499 4.56796C20.3109 5.5289 21.0679 6.65156 21.5976 7.89843C22.1437 9.19218 22.4203 10.5633 22.4203 11.9789C22.4203 13.3945 22.1414 14.7656 21.5976 16.0594C21.0703 17.3086 20.3132 18.4289 19.3499 19.3898C18.389 20.3508 17.2664 21.1078 16.0195 21.6375C14.7257 22.1812 13.3546 22.4578 11.939 22.4578ZM11.939 3.0539C7.01948 3.0539 3.01636 7.05703 3.01636 11.9766C3.01636 16.8961 7.01948 20.8992 11.939 20.8992C16.8585 20.8992 20.8617 16.8961 20.8617 11.9766C20.8617 7.05703 16.8585 3.0539 11.939 3.0539Z"/>
                <path d="M6.69604 9.61173C6.69604 9.9592 6.83408 10.2924 7.07978 10.5381C7.32548 10.7839 7.65873 10.9219 8.0062 10.9219C8.35368 10.9219 8.68692 10.7839 8.93262 10.5381C9.17832 10.2924 9.31636 9.9592 9.31636 9.61173C9.31636 9.26425 9.17832 8.93101 8.93262 8.68531C8.68692 8.43961 8.35368 8.30157 8.0062 8.30157C7.65873 8.30157 7.32548 8.43961 7.07978 8.68531C6.83408 8.93101 6.69604 9.26425 6.69604 9.61173Z"/>
                <path d="M14.5618 9.58594C14.5618 9.75799 14.5957 9.92836 14.6615 10.0873C14.7273 10.2463 14.8238 10.3907 14.9455 10.5124C15.0672 10.634 15.2116 10.7305 15.3705 10.7964C15.5295 10.8622 15.6999 10.8961 15.8719 10.8961C16.044 10.8961 16.2143 10.8622 16.3733 10.7964C16.5323 10.7305 16.6767 10.634 16.7983 10.5124C16.92 10.3907 17.0165 10.2463 17.0823 10.0873C17.1482 9.92836 17.1821 9.75799 17.1821 9.58594C17.1821 9.41389 17.1482 9.24352 17.0823 9.08457C17.0165 8.92561 16.92 8.78118 16.7983 8.65952C16.6767 8.53786 16.5323 8.44136 16.3733 8.37552C16.2143 8.30968 16.044 8.27579 15.8719 8.27579C15.6999 8.27579 15.5295 8.30968 15.3705 8.37552C15.2116 8.44136 15.0672 8.53786 14.9455 8.65952C14.8238 8.78118 14.7273 8.92561 14.6615 9.08457C14.5957 9.24352 14.5618 9.41389 14.5618 9.58594Z" />
                <path d="M14.9321 16.4672H8.93213C8.54307 16.4672 8.229 16.1531 8.229 15.7641C8.229 15.375 8.54307 15.0609 8.93213 15.0609H14.9321C15.3212 15.0609 15.6352 15.375 15.6352 15.7641C15.6352 16.1531 15.3188 16.4672 14.9321 16.4672Z"/>
                </svg>`,
                active:false
            },
            {
                text:"差评",
                value:3,
                iconUrl:`<svg style="fill:#EBEBEB" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.939 22.4578C10.5234 22.4578 9.15229 22.1789 7.85854 21.6352C6.61167 21.1078 5.48901 20.3508 4.52808 19.3875C3.56714 18.4266 2.81011 17.3039 2.28042 16.0571C1.73433 14.7633 1.45776 13.3922 1.45776 11.9766C1.45776 10.561 1.73433 9.18987 2.28042 7.89846C2.80776 6.65159 3.56479 5.52893 4.52808 4.56799C5.48901 3.60706 6.61167 2.85002 7.85854 2.32034C9.15229 1.77424 10.5234 1.49768 11.939 1.49768C13.3546 1.49768 14.7257 1.77424 16.0195 2.32034C17.2664 2.84768 18.389 3.60471 19.3499 4.56799C20.3109 5.52893 21.0679 6.65159 21.5976 7.89846C22.1437 9.19221 22.4203 10.5633 22.4203 11.9789C22.4203 13.3946 22.1414 14.7657 21.5976 16.0594C21.0703 17.3086 20.3132 18.4289 19.3499 19.3899C18.389 20.3508 17.2664 21.1078 16.0195 21.6375C14.7257 22.1813 13.3546 22.4578 11.939 22.4578ZM11.939 3.05393C7.01948 3.05393 3.01636 7.05706 3.01636 11.9766C3.01636 16.8961 7.01948 20.8992 11.939 20.8992C16.8585 20.8992 20.8617 16.8961 20.8617 11.9766C20.8617 7.05706 16.8585 3.05393 11.939 3.05393V3.05393Z" />
                <circle cx="12" cy="12" r="9" />
                <path d="M6.69604 9.61167C6.69604 9.95914 6.83408 10.2924 7.07978 10.5381C7.32548 10.7838 7.65873 10.9218 8.0062 10.9218C8.35368 10.9218 8.68692 10.7838 8.93262 10.5381C9.17832 10.2924 9.31636 9.95914 9.31636 9.61167C9.31636 9.26419 9.17832 8.93095 8.93262 8.68525C8.68692 8.43955 8.35368 8.30151 8.0062 8.30151C7.65873 8.30151 7.32548 8.43955 7.07978 8.68525C6.83408 8.93095 6.69604 9.26419 6.69604 9.61167V9.61167Z" fill="white"/>
                <path d="M14.5618 9.58591C14.5618 9.75796 14.5957 9.92833 14.6615 10.0873C14.7273 10.2462 14.8238 10.3907 14.9455 10.5123C15.0672 10.634 15.2116 10.7305 15.3705 10.7963C15.5295 10.8622 15.6999 10.8961 15.8719 10.8961C16.044 10.8961 16.2143 10.8622 16.3733 10.7963C16.5323 10.7305 16.6767 10.634 16.7983 10.5123C16.92 10.3907 17.0165 10.2462 17.0823 10.0873C17.1482 9.92833 17.1821 9.75796 17.1821 9.58591C17.1821 9.41386 17.1482 9.24349 17.0823 9.08454C17.0165 8.92558 16.92 8.78115 16.7983 8.65949C16.6767 8.53783 16.5323 8.44133 16.3733 8.37549C16.2143 8.30964 16.044 8.27576 15.8719 8.27576C15.6999 8.27576 15.5295 8.30964 15.3705 8.37549C15.2116 8.44133 15.0672 8.53783 14.9455 8.65949C14.8238 8.78115 14.7273 8.92558 14.6615 9.08454C14.5957 9.24349 14.5618 9.41386 14.5618 9.58591V9.58591Z" fill="white"/>
                <path d="M12.15 14.2617C13.3805 14.2852 14.5031 14.8758 15.4875 16.0196C15.7406 16.3125 15.7078 16.7578 15.4125 17.011C15.1195 17.2641 14.6742 17.2313 14.4211 16.936C13.7109 16.111 12.9422 15.6844 12.1313 15.6657H12.0774C10.6406 15.6657 9.45704 16.9032 9.43594 16.9243C9.17344 17.2078 8.72813 17.2243 8.44454 16.9594C8.1586 16.6946 8.14219 16.2492 8.40704 15.9657C8.47266 15.893 10.0149 14.2594 12.0774 14.2594C12.1008 14.2594 12.1266 14.2594 12.15 14.2617Z" fill="white"/>
                </svg>
                `,
                notActiveIcon:`<svg style="fill:#EBEBEB" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.939 22.4578C10.5234 22.4578 9.15229 22.1789 7.85854 21.6352C6.61167 21.1078 5.48901 20.3508 4.52808 19.3875C3.56714 18.4266 2.81011 17.3039 2.28042 16.057C1.73433 14.7633 1.45776 13.3922 1.45776 11.9766C1.45776 10.5609 1.73433 9.18984 2.28042 7.89843C2.80776 6.65156 3.56479 5.5289 4.52808 4.56796C5.48901 3.60703 6.61167 2.84999 7.85854 2.32031C9.15229 1.77421 10.5234 1.49765 11.939 1.49765C13.3546 1.49765 14.7257 1.77421 16.0195 2.32031C17.2664 2.84765 18.389 3.60468 19.3499 4.56796C20.3109 5.5289 21.0679 6.65156 21.5976 7.89843C22.1437 9.19218 22.4203 10.5633 22.4203 11.9789C22.4203 13.3945 22.1414 14.7656 21.5976 16.0594C21.0703 17.3086 20.3132 18.4289 19.3499 19.3898C18.389 20.3508 17.2664 21.1078 16.0195 21.6375C14.7257 22.1812 13.3546 22.4578 11.939 22.4578ZM11.939 3.0539C7.01948 3.0539 3.01636 7.05703 3.01636 11.9766C3.01636 16.8961 7.01948 20.8992 11.939 20.8992C16.8585 20.8992 20.8617 16.8961 20.8617 11.9766C20.8617 7.05703 16.8585 3.0539 11.939 3.0539Z" />
                <path d="M6.69604 9.61173C6.69604 9.9592 6.83408 10.2924 7.07978 10.5381C7.32548 10.7839 7.65873 10.9219 8.0062 10.9219C8.35368 10.9219 8.68692 10.7839 8.93262 10.5381C9.17832 10.2924 9.31636 9.9592 9.31636 9.61173C9.31636 9.26425 9.17832 8.93101 8.93262 8.68531C8.68692 8.43961 8.35368 8.30157 8.0062 8.30157C7.65873 8.30157 7.32548 8.43961 7.07978 8.68531C6.83408 8.93101 6.69604 9.26425 6.69604 9.61173Z" />
                <path d="M14.5618 9.58594C14.5618 9.75799 14.5957 9.92836 14.6615 10.0873C14.7273 10.2463 14.8238 10.3907 14.9455 10.5124C15.0672 10.634 15.2116 10.7305 15.3705 10.7964C15.5295 10.8622 15.6999 10.8961 15.8719 10.8961C16.044 10.8961 16.2143 10.8622 16.3733 10.7964C16.5323 10.7305 16.6767 10.634 16.7983 10.5124C16.92 10.3907 17.0165 10.2463 17.0823 10.0873C17.1482 9.92836 17.1821 9.75799 17.1821 9.58594C17.1821 9.41389 17.1482 9.24352 17.0823 9.08457C17.0165 8.92561 16.92 8.78118 16.7983 8.65952C16.6767 8.53786 16.5323 8.44136 16.3733 8.37552C16.2143 8.30968 16.044 8.27579 15.8719 8.27579C15.6999 8.27579 15.5295 8.30968 15.3705 8.37552C15.2116 8.44136 15.0672 8.53786 14.9455 8.65952C14.8238 8.78118 14.7273 8.92561 14.6615 9.08457C14.5957 9.24352 14.5618 9.41389 14.5618 9.58594Z" />
                <path d="M12.15 14.2617C13.3805 14.2851 14.5031 14.8758 15.4875 16.0195C15.7406 16.3125 15.7078 16.7578 15.4125 17.0109C15.1195 17.2641 14.6742 17.2313 14.4211 16.9359C13.7109 16.1109 12.9422 15.6844 12.1313 15.6656H12.0774C10.6406 15.6656 9.45704 16.9031 9.43594 16.9242C9.17344 17.2078 8.72813 17.2242 8.44454 16.9594C8.1586 16.6945 8.14219 16.2492 8.40704 15.9656C8.47266 15.893 10.0149 14.2594 12.0774 14.2594C12.1008 14.2594 12.1266 14.2594 12.15 14.2617Z" />
                </svg>`,
                active:false
            },
        ],
        commentsSuggestions:"",
        color:"#EBEBEB",
        activeColor:evaluateApp.globalData.themeColor,
        value:{
            shopValue:0,
            productValue:0,
            logisticsValue:0
        },
        comprehenLevel:1,
        serviceLevel:0,
        itemLevel:0,
        deliveryLevel:0,
        orderId:"",
        orderNo:"",
        themeColor:evaluateApp.globalData.themeColor,
        pageType:""
    },
    
    handleIsActive(e:any):void{
        let newData:ItemData = e.currentTarget.dataset.item;
        let newGradeData:ItemData[] = this.data.gradeData.map((item:ItemData)=>{
            item.active = false;
            if(item.text===newData.text){
                item.active = true;
                item.iconUrl = svgColor(item.iconUrl,evaluateApp.globalData.themeColor);
            }
            return item
        })
        this.setData({
            gradeData:newGradeData,
            comprehenLevel:e.currentTarget.dataset.item.value
        })
    },
    change(e:any){
        let type = e.currentTarget.dataset.active
        if(type=="店铺评价"){
            this.setData({
                serviceLevel:e.detail.value
            })
        }else if(type=="产品评价"){
            this.setData({
                itemLevel:e.detail.value
            })
        }else if(type=="物流评价"){
            this.setData({
                deliveryLevel:e.detail.value
            })
        }
        console.log(e,this.data.value);
    },
    tapSubmit():void{
        let {comprehenLevel,commentsSuggestions,serviceLevel,itemLevel,deliveryLevel,orderId,orderNo,pageType} = this.data
        let data = {
            adviceSuggest: commentsSuggestions,
            comprehenLevel,
            deliveryLevel,
            itemLevel,
            orderId,
            orderNo,
            serviceLevel
        }
        if(!comprehenLevel) return util.showErrorToast('请对本次订单进行评价');
        if(!deliveryLevel||!itemLevel||!serviceLevel) return util.showErrorToast('请对本次订单进行评价');
        util.request(api.orderRate,data,"POST").then(()=>{
            wx.setStorageSync("currentTime",new Date().getTime())
            wx.showToast({
                title: '提交评价成功',
                icon: 'success',
                duration: 2000,
                success(){
                   setTimeout(()=>{
                    var pages  = getCurrentPages();
                    var prevPage = pages[pages.length - 2];
                    prevPage.setData({
                        pageType
                    })
                    wx.navigateBack({
                        delta: 1 // 返回上一级页面。
                    })
                   },2000)
                }
            })
        }).catch(()=>{
            wx.setStorageSync("currentTime",null)
            util.showErrorToast('提交失败');
        })
        
    },
    setTwoNumber(n:any){
        if(n<10){
            n = '0'+ n
        }
        return n
    },
    /**
     * 生命周期函数--监听页面加载
     */
    onLoad(options:any) {
        wx.setStorageSync("currentTime",null)
        let params = JSON.parse(decodeURIComponent(options.params))
        console.log("params参数======",params);
        
        let time = new Date(params.orderTime)
        let y = time.getFullYear()
        let m = time.getMonth()+1
        let d = time.getDate()
        let h = time.getHours()
        let mm = time.getMinutes()
        let s = time.getSeconds()
        this.setData({
            orderId:params.orderId,
            orderNo:params.orderNo,
            time:params.orderTime?`${y}-${m}-${d} ${this.setTwoNumber(h)}:${this.setTwoNumber(mm)}:${this.setTwoNumber(s)}`:'',
            pageType:params.type
        })
    },

    /**
     * 生命周期函数--监听页面初次渲染完成
     */
    onReady() {
        
    },

    /**
     * 生命周期函数--监听页面显示
     */
    onShow() {
        let newgradeData:ItemData[] = this.data.gradeData.map((item:ItemData)=>{
            item.iconUrl = encodeURIComponent(item.iconUrl)
            item.notActiveIcon = encodeURIComponent(item.notActiveIcon)
            return item
        })
        this.setData({
            gradeData:newgradeData,
            themeColor:evaluateApp.globalData.themeColor
        })
    },

    /**
     * 生命周期函数--监听页面隐藏
     */
    onHide() {

    },

    /**
     * 生命周期函数--监听页面卸载
     */
    onUnload() {

    },

    /**
     * 页面相关事件处理函数--监听用户下拉动作
     */
    onPullDownRefresh() {

    },

    /**
     * 页面上拉触底事件的处理函数
     */
    onReachBottom() {

    },


})